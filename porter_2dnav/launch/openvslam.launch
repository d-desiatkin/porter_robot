<launch>
	<arg name="offline"          default="false"/>

	<group ns="porter">

		<include unless="$(arg offline)"
			file="$(find realsense2_camera)/launch/rs_camera.launch">

			<arg name="camera"	value="rs_camera"/>

			<arg name="enable_color"        value="true"/>
			<arg name="enable_fisheye"	value="false"/>
			<arg name="enable_depth"        value="true"/>
			<arg name="enable_gyro"         value="false"/>
			<arg name="enable_accel"        value="true"/>
			<arg name="enable_infra1"       value="false"/>
			<arg name="enable_infra2"       value="false"/>

			<arg name="color_width"         default="640"/>
			<arg name="color_height"        default="480"/>
			<arg name="depth_width"         default="640"/>
			<arg name="depth_height"        default="480"/>
			<arg name="gyro_fps"            value="200"/>
			<arg name="accel_fps"           value="63"/>
			
			<arg name="filters"	value=""/>
			<arg name="enable_sync"	value="true"/>
			<arg name="align_depth"	value="true"/>
			<arg name="linear_accel_cov"	value="1.0"/>
			<arg name="unite_imu_method"	value="linear_interpolation"/>
		</include>

		<group ns="openvslam">
			<node pkg="openvslam" type="rgbd" name="openvslam" launch-prefix='' 
				args="-v $(find openvslam)/../../config/orb_vocab.dbow2  -c $(find openvslam)/../../config/rgbd.yaml 
				-p $(find porter_map)/openvslam/garage.msg">
				<remap from="color/image_raw" to="/porter/rs_camera/color/image_raw" />
				<remap from="depth/image_raw" to="/porter/rs_camera/aligned_depth_to_color/image_raw" />
				
			</node>
			
			<node pkg="octomap_server" type="octomap_server_node" name="octomap_map_proj">

				<param name="resolution" value="0.05" />
				
				<param name="frame_id" type="string" value="map" />
				
				<param name="sensor_model/max_range" value="10.0" />
				<param name="pointcloud_min_z" value="0.13" />
				
				<remap from="cloud_in" to="map_cloud" />

			</node>
			
		</group>

	</group>

</launch> 
