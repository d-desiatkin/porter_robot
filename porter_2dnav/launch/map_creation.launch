<launch>
	
	<arg name="scan_topic" value="/porter/os1_cloud_node/scan" />
	
	<param name="use_sim_time" value="false"/>
	
	<node pkg="pointcloud_to_laserscan" type="pointcloud_to_laserscan_node" name="lidar_converter" ns="porter" >
		<param name="~concurrency_level" value="0" />
		<param name="~range_max" value="20.0" />

		<remap from="cloud_in" to="/porter/os1_cloud_node/points" />
		<remap from="/scan" to="$(arg scan_topic)" />
	</node>
		
	<include file="$(find ouster_driver)/launch/os1.launch" ns="porter">
		<arg name="lidar_address" value="10.5.5.80" />
		<arg name="node_name" value="os1_cloud_node" />
		<arg name="pc_address" value="10.5.5.1" />
		<arg name="pointcloud_mode" value="NATIVE" />
		<arg name="lidar_frame_name" value="os1_lidar" />
		<arg name="lidar_topic_name" value="/porter/os1_cloud_node/points" />
		<arg name="imu_frame_name" value="os1_imu" />
		<arg name="imu_topic_name" value="/porter/os1_cloud_node/imu" />
		<arg name="operation_mode" value="1024x20" />
		<arg name="window_rejection" value="" />
	</include>	
	
	<node pkg="gmapping" type="slam_gmapping" name="slam_gmapping" ns="porter">
		<param name="base_frame" value="chasiss" />
		<param name="odom_frame" value="odom" />
		<param name="map_frame" value="map" />
		<param name="map_update_interval" value="5.0" />
		<param name="maxUrange" value="50.0" />
		<param name="maxRange" value="70.0" />
		<param name="throttle_scans" value="1" />
		<remap from="/scan" to="$(arg scan_topic)"/>
	</node>

</launch> 
